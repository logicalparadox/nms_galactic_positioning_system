# <% const ScanMeta = Atlas.Config.PlanetQuery.Complex.find((s) => s.MissionID === Atlas.Metadata.Name); %>

ScanEvents:
  - Name: <%= Atlas.ScanEvent('QRY') %>
    EventStartType: Special

    # UI
    MessageAudio: VO_TUT_COORDSRECEIVED
    MarkerIcon: TEXTURES/UI/HUD/ICONS/MISSIONS/MISSION.PLANET.DDS
    OSDMessage: <%= Atlas.Mod.LocKey(`PQ_${ScanMeta.ID}_TITLE`) %>
    MarkerLabel: <%= Atlas.Mod.LocKey(`PQ_${ScanMeta.ID}_TITLE`) %>

    # Search Params
    BuildingLocation: PlanetSearch
    # ForceWideRandom: true
    SolarSystemLocation: LocalOrNear
    SolarSystemAttributes:
      AllowUnsafeMatches: true
      RequireUndiscovered: true
      NeedsExtremeWeatherPlanet: true
      NeedsBiome: true
      NeedsBiomeType: Lava
      # UseBiomeSubType: Lava
      NeedsAbandonedSystem: true
      # NeedsResourceHint: UI_BONES_HINT
    # SolarSystemAttributesFallback:
    # NeedsResourceHint: ''

Mission:
  MissionID: <%= Atlas.Metadata.Name %>

  MissionTitles:
    Format: <%= Atlas.Mod.LocKey(`PQ_${ScanMeta.ID}_TITLE`) %>

  MissionDescriptions:
    Format: <%= Atlas.Mod.LocKey(`PQ_${ScanMeta.ID}_DESC`) %>

  Stages:
    - _import: ../stages/00_StageWrapper.yml
      Metadata:
        Name: WRAP
        ID: '00'
      Config:
        ScanEvent: <%= Atlas.ScanEvent('QRY') %>
